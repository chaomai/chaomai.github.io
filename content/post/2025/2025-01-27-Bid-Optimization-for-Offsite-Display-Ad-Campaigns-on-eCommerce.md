---
title: Bid Optimization for Offsite Display Ad Campaigns on eCommerceÁ¨îËÆ∞
date: 2025-01-27 23:57:52
categories:
    - computational-advertising
tags:
    - roas
    - dsp
---

[üìïPaper Notes](/2024/2024-11-02-paper-notes)

## ËÉåÊôØ

‰ΩúËÄÖ‰ª¨‰ªéÂπøÂëä‰∏ªËßÜËßí‰ªãÁªç‰∫Ü‰∏Ä‰∏™Á´û‰ª∑‰ºòÂåñÁ≥ªÁªüÔºåÁõÆÊ†áÊòØÂú® DSP ÊäïÊîæÂπøÂëäÊó∂Ôºå Â∞Ü ROASÔºàReturn on Ad SpendÔºâÊúÄÂ§ßÂåñ„ÄÇËØ•Á≥ªÁªüËß£ÂÜ≥‰∫ÜÂπøÂëä‰∏ªÂú®Â∞ùËØï‰ºòÂåñ ROAS Âá∫‰ª∑Êó∂ÈÅáÂà∞ÁöÑÂá†‰∏™ÈóÆÈ¢ò„ÄÇ

-   Áº∫Â∞ë‰ø°ÊÅØÂÖ±‰∫´
-   ÊâãÂä®Ë∞É‰ª∑
-   Clicks Âíå Revenue ‰ΩéÁõ∏ÂÖ≥ÊÄß
    -   Áî±‰∫é**ËΩ¨ÂåñÊïàÊûúÁöÑÊªûÂêéÊÄß**ÔºåÁÇπÂáªÁ±ªÊåáÊ†á‰∏éÂ±ïÁ§∫ÂπøÂëäÁ≥ªÂàóÁöÑÊî∂ÂÖ•Áõ∏ÂÖ≥ÊÄßËæÉ‰Ωé„ÄÇÂõ†Ê≠§Ôºå**‰ª•ÁÇπÂáªÈáè‰∏∫‰ºòÂåñÁõÆÊ†áÂπ∂‰∏çËÉΩÊúâÊïàÊèêÂçáÊî∂ÂÖ•**
-   Á´û‰ª∑ÁéØÂ¢ÉÂ∏¶Êù•ÁöÑÈ¢Ñ‰º∞ÊåëÊàò
-   Áº∫Â∞ëÈÄèÊòéÁöÑÈ¢ÑÁÆóÂíåÊ∂àË¥πÊéßÂà∂

## Dimensional Bidding

‰∏∫‰∫ÜËß£ÂÜ≥Ëøô‰∫õÈóÆÈ¢òÔºå‰ΩúËÄÖÊèêÂá∫‰∫Ü‰∏ÄÁßçÂ§öÁª¥Â∫¶Á´û‰ª∑ÊñπÊ≥ïÔºåËØ•ÊñπÊ≥ï‰ºöÊ†πÊçÆÂπøÂëäËØ∑Ê±ÇÁöÑ‰∏çÂêåÁªÜÂàÜ segment ËøõË°åÂá∫‰ª∑Ë∞ÉÊï¥„ÄÇ

### Segmentation

È¶ñÂÖàÂ∞ÜÂ±ïÁé∞‰∫∫Áæ§ÂàíÂàÜ‰∏∫Â≠ê‰∫∫Áæ§ÔºåÂç≥ dimension„ÄÇdimension ÊòØÊåáÂèØ‰ª•ÂÆöÂêë„ÄÅÂ±èËîΩÊàñË∞ÉÊï¥Âá∫‰ª∑ÁöÑÂÆöÂêëÊù°‰ª∂„ÄÇËøôÊ†∑‰æø‰∫éËøΩË∏™ÊØè‰∏™ dimension ÁöÑÊïàÊûú‰πü‰æø‰∫éÊé¢Á¥¢„ÄÇ

### Overlapping Dimensions

#### Assumptions

Á≥ªÁªü‰æùËµñÂ¶Ç‰∏ãÂá†‰∏™ÂÅáËÆæÔºö

1. CPM Ê≠£ÊØî‰∫é bid factor
    - base bid \* bid factor ÊòØÂÆûÈôÖÂá∫‰ª∑ bid price
    - campaign ÁöÑ cost ‰πü‰ºöÈöèÁùÄ bid factor ÁöÑÂ¢ûÂä†ËÄåÂ¢ûÂä†
2. win ÁöÑÊï∞ÁõÆÔºàÊàñËÄÖ impÔºâÊ≠£ÊØî‰∫é bid factor
3. RPM Áã¨Á´ã‰∫é bid priceÔºå‰∏îÂú®Áü≠Êó∂Èó¥ÂÜÖÁõ∏ÂØπÁ®≥ÂÆö
    - Â¶ÇÊûúÊàë‰ª¨ RPM Êù•ÈÄâÊã© dimensionÔºåÈÇ£‰πàÊØè‰∏™ dimension ÁöÑÂπ≥ÂùáÊî∂Áõä‰∏çÂ∫îËØ•ÂèñÂÜ≥‰∫é cost„ÄÇ

#### Disjoint Bid Dimensions

Âü∫‰∫é‰ª•‰∏äÂÅáËÆæÔºåÂèØ‰ª•ÈÄöËøáÂÆö‰πâÂ§ö‰∏™‰∫íÊñ•ÁöÑ dimension Âπ∂‰∏∫ÊØè‰∏™ dimension ËÆæÁΩÆ‰∏Ä‰∏™ bid adjustment„ÄÇÂØπ‰∫éÁ¨¨ i ‰∏™ dimensionÔºåÂÆö‰πâÂ¶Ç‰∏ãÂèÇÊï∞Ôºå

-   Cost per (mille) impression: $CPM_i$
-   Revenue per (mille) impression: $RPM_i$
-   Number of won impressions: $n_i$
-   Total ads spend: $S_i$
-   Total revenue: $R_i$
-   Bid (adjustment) factor: $f_i$

ËøôÊ†∑ÈúÄË¶ÅËß£ÂÜ≥ÁöÑ‰ºòÂåñÈóÆÈ¢òÂ¶Ç‰∏ãÔºå

$$
\begin{equation}
\begin{aligned}
    \max_{f_i} \quad & \sum_{i=1}^{m} RPM_i \cdot g(f_i) \\
    \text{s.t.} \quad & \sum_{i=1}^{m} S_i \leq B
\end{aligned}
\end{equation}
$$

ÂÖ∂‰∏≠$B$‰∏∫ÊÄªÈ¢ÑÁÆóÔºå$n_i=g(f_i)$ÊòØÁî®‰∫éË°®Á§∫Áª¥Â∫¶ ùëñ ÊõùÂÖâÈáèÁöÑÊ®°Âûã„ÄÇ‰∏çÂ§±‰∏ÄËà¨ÊÄßÔºåÂÅáËÆæÂü∫Á°Ä bid ‰∏∫$b_0=1$„ÄÇ‰ΩøÁî®‰∏Ä‰∏™ÁÆÄÂçïÁöÑÁ∫øÊÄßÊ®°ÂûãÂèØ‰ª•ËÆ§‰∏∫$n_i = g(f_i) = \beta_i \cdot f_i$„ÄÇ

|          | Geo1                | Geo2                | Geo3                | Total                        |
| -------- | ------------------- | ------------------- | ------------------- | ---------------------------- |
| website1 | $n_1 = \beta_1 f_1$ | $n_2 = \beta_2 f_2$ | $n_3 = \beta_3 f_3$ | $\sum_{i=1}^{3} \beta_i f_i$ |
| website2 | $n_4 = \beta_4 f_4$ | $n_5 = \beta_5 f_5$ | $n_6 = \beta_6 f_6$ | $\sum_{i=4}^{6} \beta_i f_i$ |
| website3 | $n_7 = \beta_7 f_7$ | $n_8 = \beta_8 f_8$ | $n_9 = \beta_9 f_9$ | $\sum_{i=7}^{9} \beta_i f_i$ |
| ...      | ...                 | ...                 | ...                 | $\sum_{i=1}^{9} \beta_i f_i$ |

ÂèàÂõ†‰∏∫ GFP ‰∏≠Ôºå$CPM_i \approx b_0 \cdot f_i = f_i$„ÄÇÁªº‰∏äÂèØ‰ª•ÂæóÂà∞Â¶Ç‰∏ãÂÖ≥Á≥ªÔºå

$$
\begin{equation}
\begin{aligned}
	& S_i = n_i \cdot CPM_i = \beta_i \cdot f_i^2 \\
	& R_i = RPM_i \cdot n_i = RPM_i \cdot \beta_i \cdot f_i = RPM_i \cdot \sqrt{\beta_i \cdot S_i}
\end{aligned}
\end{equation}
$$

‰ºòÂåñÈóÆÈ¢òËΩ¨Âåñ‰∏∫Ôºå

$$
\begin{equation}
\begin{aligned}
    \max_{f_i} \quad & \sum_{i=1}^{m} RPM_i \cdot \beta_i \cdot f_i \\
    \text{s.t.} \quad & \sum_{i=1}^{m} f_i^2 \cdot \beta_i \leq B.
\end{aligned}
\end{equation}
$$

ÊØè‰∏™$f_i$ÁöÑËß£ÊûêËß£Â¶Ç‰∏ãÔºå

$$
\hat{f}_i = \sqrt{\frac{RPM_i^2}{\sum_{j=1}^{m} RPM_j^2 \cdot \beta_j} \cdot B}.
$$

Ëøô‰∏™ÊñπÊ≥ïÊúâ‰∏§‰∏™ÂºäÁ´ØÔºå

1. Áª¥Â∫¶ÁàÜÁÇ∏„ÄÇ
    - ÈúÄË¶Å‰∏∫ÊØè‰∏™ segment ÈÉΩÂàÜÈÖç‰∏Ä‰∏™Á≥ªÊï∞„ÄÇ
    - Á≥ªÊï∞ÁöÑÊï∞Èáè‰∏∫Ôºå$\Theta\left(I^K\right)$ÔºåÂÖ∂‰∏≠$K$ÊòØÁª¥Êï∞Ôºå$I$ÊòØÊØè‰∏™ dimension ‰∏≠ÁªÑÁöÑÊï∞Èáè„ÄÇ
2. Â¶ÇÊûú segment ÁöÑÊï∞ÈáèÂæàÂ§ßÔºåÈÇ£Êï∞ÊçÆÂ∞ÜËøá‰∫éÁ≥ªÊï∞ÔºåÂ∞ÜÊó†Ê≥ïÊúâÊïàÁöÑËÆ°ÁÆó $RPM_i$ Ôºå$g(f_i)$„ÄÇ

#### Overlapping Dimensions

ËøôÈáåÊîπ‰∏∫ÊØè‰∏™ group ÂàÜÈÖçÁ≥ªÊï∞ÔºåËÄåÈùûÊØè‰∏™ segmentÔºåÂèÇÊï∞ÁöÑÊï∞ÈáèÂáèÂ∞ëÂà∞$\Theta\left(I \cdot K\right)$„ÄÇ$f_j^i$Ë°®Á§∫Á¨¨$i$‰∏™Áª¥Â∫¶ÁöÑÁ¨¨$j$‰∏™ group„ÄÇ

|                    | Geo1 ($f_1^2$)                    | Geo2 ($f_2^2$)                    | Geo3 ($f_3^2$)                    | Total                                       |
| ------------------ | --------------------------------- | --------------------------------- | --------------------------------- | ------------------------------------------- |
| website1 ($f_1^1$) | $-$                               | $-$                               | $-$                               | $n_1^1 = g(f_1^1, f_{[1,2,3]}^2)$           |
| website2 ($f_2^1$) | $-$                               | $-$                               | $-$                               | $n_2^1 = g(f_2^1, f_{[1,2,3]}^2)$           |
| website3 ($f_3^1$) | $-$                               | $-$                               | $-$                               | $n_3^1 = g(f_3^1, f_{[1,2,3]}^2)$           |
| Total              | $n_1^2 = g(f_1^2, f_{[1,2,3]}^1)$ | $n_2^2 = g(f_2^2, f_{[1,2,3]}^1)$ | $n_3^2 = g(f_3^2, f_{[1,2,3]}^1)$ | $= \sum_{i=1}^3 n_i^1 = \sum_{i=1}^3 n_i^2$ |

ÂÅáËÆæ bid factor ÊòØÂèØ‰ª•ÂàÜËß£ÁöÑ$f_l = f_w^1 \cdot f_z^2$Ôºå$l$Ë°®Á§∫‰∏§‰∏™ dimension ÁöÑÂÖ∂‰∏≠‰∏ÄÁªÑ‰∏çÁõ∏‰∫§ÁöÑÁª¥Â∫¶ÔºåÊ≠§Êó∂ÊØè‰∏™ segment ÁöÑ bid factor Áî±‰∏§‰∏™ group ÁöÑ bid factor ÂÜ≥ÂÆö$b = b_0 \cdot f_w^1 \cdot f_z^2$„ÄÇ

ÊØè‰∏™ dimension ÁöÑ cost ÂíåÊÄª cost Â¶Ç‰∏ãÔºåÂÖ∂‰∏≠$K$Âíå$I$ÂàÜÂà´Ë°®Á§∫Áª¥Êï∞ÂíåÊØè‰∏™ dimension ÁöÑ group Êï∞ÔºàÂÅáËÆæÈÉΩÁõ∏ÂêåÔºâÔºå

$$
\begin{equation}
\begin{aligned}
	S^i & = \sum_{j=1}^{I} S^{i}_j = B \\
	\sum_{i=1}^{K} S^i & = K \cdot B.
\end{aligned}
\end{equation}
$$

Áî±‰∫é‰∏çÂêå dimension ÁöÑ group Â≠òÂú®Áõ∏‰∫íÈáçÂè†ÔºåÂõ†Ê≠§ÊØè‰∏™ segment ÁöÑÊï∞ÊçÆÂèØ‰ª•‰ΩøÁî®Êõ¥Â§öÊï∞ÊçÆÊù•Ë°®Á§∫„ÄÇÊ≠§Êó∂‰ºòÂåñÈóÆÈ¢òÂèò‰∏∫Ôºå

$$
\begin{equation}
\begin{aligned}
    \max_{f_i^k} \quad & \frac{1}{K} \sum_{k=1}^{K} \sum_{i=1}^{I_k} n_i^k \cdot RPM_i^k \\
    \text{s.t.} \quad & \frac{1}{K} \sum_{k=1}^{K} \sum_{i=1}^{I_k} n_i^k \cdot CPM_i^k \leq B.
\end{aligned}
\end{equation}
$$

CPM ‰ΩøÁî®‰∏Ä‰∏™ÁÆÄÂçïÁ∫øÊÄßÊ®°ÂûãË°®Á§∫Ôºå$CPM_i^k = a + b \cdot f_i^k$„ÄÇ

Â±ïÁé∞Èáè‰ΩøÁî®Â¶Ç‰∏ãÊ®°ÂûãË°®Á§∫ÔºåÊúÄÂêé‰∏Ä‰∏™È°πË°®Á§∫ÂÖ∂‰ªñ dimension ÁöÑ bid factor ÁöÑÂΩ±Âìç„ÄÇ

$$n_i^k = g(f_1^1, \dots, f_I^K) = a^k + \left( \beta_i^k \cdot f_i^k \right) \cdot \left( \prod_{d \neq k} \sum_{j=1}^{I} \beta_j^d \cdot f_j^d \right)$$

## Dimension Selection and Evaluation

ÁÆÄÂçïÊù•ËØ¥‰ΩúËÄÖÈÄâÊã© dimension ÁöÑÂéüÂàôÊòØÔºåËÉΩÂ§üÂú®‰∏çÂêå group ‰πãÈó¥ÊúÄÂ§ßÂåñ RPM Â∑ÆÂºÇÁöÑ dimension„ÄÇ‰ª•‰æøËøõË°åÊúâÊïàÁöÑ bid Ë∞ÉÊï¥„ÄÇ

### Grouping Methods

#### Random

‰ΩøÂæóÂ±ïÁé∞ÈáèÂùáÂåÄÔºå‰ΩÜÊó†Ê≥ï‰øùËØÅ RPM Âú®ÂêÑ‰∏™ group ‰πãÈó¥ÁöÑÂå∫ÂàÜÂ∫¶„ÄÇ

#### Two-step heuristic

1. Sort all $v \in V$ based on $\text{RPM}(v)$ in ascending order, resulting in a sorted list: $V' = \{ v'_1, v'_2, \ldots, v'_n \} \quad \text{such that} \quad \text{RPM}(v'_1) \leq \text{RPM}(v'_2) \leq \ldots \leq \text{RPM}(v'_n)$
2. Assign Group Labels:
    - Initialize: $g = 1 \quad \text{(group label)}, \quad I_{\text{cumulative}} = 0 \quad \text{(cumulative impression volume)}.$
    - For each $v'\_i \in V'$:
        - Assign the current group label $ g $ to $v'\_i$.
        - Update the cumulative impression volume: $I_{\text{cumulative}} \leftarrow I_{\text{cumulative}} + I(v'_i)$
        - If $I_{\text{cumulative}} \geq I_{\text{min}}$
          then:
            - Increment the group label: $g \leftarrow g + 1$
            - Reset the cumulative impression volume: $I_{\text{cumulative}} \leftarrow 0$

#### ÂÖ∂‰ªñ

-   Hierarchical grouping
-   Categorical grouping
-   Time-based grouping

### Evaluation of Dimensions and Groups

#### RPM Distances

ÊØîËæÉ‰∏çÂêå group ‰πãÈó¥ RPM ÁöÑË∂ãÂäøÔºàÊØèÊó• RPMÔºâÔºåÈÄâÊã©Â∑ÆÂºÇËæÉÂ§ßÁöÑ„ÄÇ

$$
r(a, b) = \frac{
    \sum_{t=1}^{T} 1\left( RPM_{\text{grp}}^t a > RPM_{\text{grp}}^t b \right) + 1
}{ \sum_{t=1}^{T} 1\left( RPM_{\text{grp}}^t a \leq RPM_{\text{grp}}^t b \right) + 1 }
$$

$$
pairwise\_distance(a, b) = \left| \sum_{t=1}^{T} \left( RPM_{\text{grp}}^t a - RPM_{\text{grp}}^t b \right) \right| + \lambda \cdot \frac{\max \left\{ r, \frac{1}{r} \right\}}{T}
$$

#### Information Value

ÁâπÂæÅÈÄâÊã©‰∏≠ÁöÑÊñπÊ≥ï‰πã‰∏Ä„ÄÇ

|       | ÂéüÂßã                                                                                                                                                                                                                                                                  | ‰øÆÊîπÁâà                                                                                                                                                                    |
| ----- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| $WOE$ | $WoE_{\text{category}_i} = \ln \left( \frac{\left( \frac{\text{non\_events}_{\text{category}_i}}{\text{non\_events}_{\text{total}}} \right)}{\left( \frac{\text{events}_{\text{category}_i}}{\text{events}_{\text{total}}} \right)} \right)$<br>                      | $Modified \, WOE_i = \left[ \log \left( \frac{\% \text{conversions}_i}{\% \text{impressions}_i} \right) \right] \times 100\%$                                             |
| $IV$  | $IV_{\text{category}_i} = \sum \left( \left( \frac{\text{non\_events}_{\text{category}_i}}{\text{non\_events}_{\text{total}}} \right) - \left( \frac{\text{events}_{\text{category}_i}}{\text{events}_{\text{total}}} \right) \right) \times WoE_{\text{category}_i}$ | $IV = \sum_{i=1}^{n} \left( \% \text{conversions}_i - \% \text{impressions}_i \right) \times \log \left( \frac{\% \text{conversions}_i}{\% \text{impressions}_i} \right)$ |

#### Mutual Information

ÂâçÈù¢‰∏§‰∏™ÊñπÊ≥ï‰∏ªË¶ÅÁî®‰∫éÂú®Êüê‰∏™ dimension ‰∏≠ËØÑ‰º∞Â§ö‰∏™ group„ÄÇ

ËØÑ‰º∞Â§ö‰∏™ dimension Êó∂Ôºå‰ΩøÁî®‰∫í‰ø°ÊÅØ„ÄÇÁâπÂæÅÈÄâÊã©‰∏≠ÁöÑÊñπÊ≥ï‰πã‰∏Ä„ÄÇ

$$
MI(g_i, g_j, Y) = \sum_{(i,j) \in (g_i, g_j)} \sum_{y \in Y} p(i,j,y) \cdot \log \left( \frac{p(i,j,y)}{p(i,j) \cdot p(y)} \right)
$$

ÂÖ∂‰∏≠Ôºå

-   $g_i$‰∏∫Á¨¨$i$‰∏™ dimension ÁöÑ label
-   $p(i,j)$ÊòØÊù•Ëá™‰∏§‰∏™ dimension ÁöÑ‰∏§‰∏™ group ÁöÑÂ±ïÁé∞Ê¨°Êï∞ÁöÑËÅîÂêàÂàÜÂ∏ÉÂØÜÂ∫¶ÂáΩÊï∞
-   $p(i, j, y)$ÊòØ$(g_i, g_j, Y)$ÁöÑËÅîÂêàÂàÜÂ∏ÉÂØÜÂ∫¶ÂáΩÊï∞
